<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Shashank R. Yende — Arohanagara · Business Use Cases (Vibrant List)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#080214;
      --muted:#aeb8c6;
      --accent-1:#ff5fa2;
      --accent-2:#7aa2ff;
      --accent-3: linear-gradient(135deg,#ff5fa2,#7aa2ff);
      --card-border: rgba(255,255,255,0.04);
      --radius:14px;
      --max-width:1240px;
      --shadow-lg: 0 24px 70px rgba(10,8,20,0.85);
      --glass-blur: 12px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,"Helvetica Neue",Arial;
      color:#e9f6ff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:28px;
      display:flex;
      justify-content:center;
      background:
        radial-gradient(900px at 10% 20%, rgba(72,95,199,0.16), transparent 60%),
        radial-gradient(800px at 90% 10%, rgba(255,95,162,0.14), transparent 65%),
        radial-gradient(1200px at 50% 90%, rgba(56,200,160,0.10), transparent 70%),
        linear-gradient(180deg, #0d1117 0%, #0b1220 50%, #0a0f1c 100%);
      overflow-x:hidden;
      position:relative;
    }

    /* light texture */
    body::after{
      content: "";
      position: fixed;
      inset: -8%;
      pointer-events: none;
      background-image: url("data:image/svg+xml;utf8,\
      <svg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'>\
        <filter id='n'><feTurbulence baseFrequency='0.75' numOctaves='1' stitchTiles='stitch'/><feColorMatrix type='saturate' values='0'/></filter>\
        <rect width='100%' height='100%' filter='url(%23n)' opacity='0.035'/>\
      </svg>");
      mix-blend-mode: overlay;
      opacity:0.9;
      z-index:0;
    }

    .wrap{
      position:relative;
      width:100%;
      max-width:var(--max-width);
      display:grid;
      grid-template-columns: 300px 1fr;
      gap:22px;
      align-items:start;
      z-index:2;
    }

    /* SIDEBAR */
    .sidebar{
      position:sticky; top:28px;
      border-radius:var(--radius);
      padding:20px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.006));
      border:1px solid var(--card-border);
      backdrop-filter: blur(var(--glass-blur));
      box-shadow:0 14px 40px rgba(2,6,23,0.55);
      height:fit-content;
    }
    .brand{display:flex;gap:12px;align-items:center;margin-bottom:12px}
    .logo{
      width:56px;height:56px;border-radius:12px;
      background:var(--accent-3);display:flex;align-items:center;justify-content:center;
      font-weight:800;color:#021022;font-size:1.1rem;box-shadow:0 12px 36px rgba(255,95,162,0.08);
    }
    .author h3{margin:0;font-size:1.02rem}
    .author p{margin:6px 0 0 0;color:var(--muted);font-size:0.86rem}

    .muted{color:var(--muted);font-size:0.84rem}
    .sidebar .section{margin-top:18px}
    .sidebar .label{font-size:0.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.12em;margin-bottom:8px}
    .tagrow{display:flex;flex-wrap:wrap;gap:8px}
    .chip{font-size:0.78rem;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02);color:var(--muted)}

    .link-primary{
      display:inline-flex;gap:10px;align-items:center;padding:10px 12px;border-radius:10px;
      background:linear-gradient(90deg, rgba(255,95,162,0.08), rgba(122,162,255,0.06));
      color:var(--accent-2);text-decoration:none;font-weight:700;border:1px solid rgba(122,162,255,0.06);
      margin-top:10px;
    }

    /* MAIN */
    .main{display:flex;flex-direction:column;gap:14px}
    .topbar{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      padding:12px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);
      border:1px solid var(--card-border);
      backdrop-filter: blur(8px);
    }
    .hero h1{margin:0;font-size:1.15rem}
    .hero p{margin:6px 0 0 0;color:var(--muted);font-size:0.93rem;max-width:780px}

    .controls{display:flex;gap:12px;align-items:center}
    .search{
      display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:999px;
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.012));
      border:1px solid rgba(255,255,255,0.02); min-width:360px;
    }
    .search input{background:transparent;border:0;outline:0;color:inherit;font-size:0.95rem;width:100%}
    .view-controls{display:flex;gap:8px}

    .btn{
      padding:9px 12px;border-radius:10px;border:0;background:transparent;color:var(--muted);
      font-weight:600;cursor:pointer;border:1px solid rgba(255,255,255,0.02);
    }
    .btn.primary{
      background:linear-gradient(90deg,#1b2133,#24162a); color:var(--accent-2);
      border:1px solid rgba(122,162,255,0.08);
      box-shadow:0 10px 30px rgba(8,20,40,0.6);
    }

    /* content area */
    .board{display:grid;grid-template-columns: repeat(3, 1fr);gap:18px;align-items:start}
    .case{
      background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.008));
      border-radius:12px;padding:18px;border:1px solid var(--card-border);
      box-shadow:0 10px 30px rgba(2,6,23,0.6);
      transition:transform .22s cubic-bezier(.2,.9,.3,1), box-shadow .22s;
      display:flex;flex-direction:column;gap:10px;min-height:150px;
    }
    .case:hover{transform:translateY(-6px);box-shadow:var(--shadow-lg)}
    .case .meta{font-size:0.78rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.14em}
    .case h3{margin:0;font-size:1.02rem}
    .case p{margin:6px 0 0 0;color:var(--muted);font-size:0.95rem;line-height:1.45;max-height:7.2em;overflow:hidden}
    .taglist{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .tag-pill{background:rgba(255,255,255,0.02);padding:6px 9px;border-radius:999px;border:1px solid rgba(255,255,255,0.02);color:var(--muted);font-size:0.82rem}
    .case .impl{display:flex;justify-content:space-between;align-items:center;margin-top:auto}
    .code-link{color:var(--accent-2);font-weight:700;text-decoration:none}

    /* LIST view */
    .listview{display:flex;flex-direction:column;gap:12px}
    .list-item{display:flex;gap:14px;padding:14px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px solid var(--card-border)}
    .list-left{display:flex;gap:12px;align-items:center}
    .case-num{width:54px;height:54px;border-radius:12px;background:linear-gradient(135deg,#ff5fa2,#7aa2ff);display:flex;align-items:center;justify-content:center;font-weight:800;color:#021022}
    .list-body h4{margin:0}
    .list-body p{color:var(--muted);margin-top:8px}

    /* table view */
    .table-wrap{background:transparent;border-radius:10px;overflow:auto;border:1px solid var(--card-border)}
    table{width:100%;border-collapse:collapse;color:var(--muted)}
    th,td{padding:12px 14px;border-bottom:1px dashed rgba(255,255,255,0.02);text-align:left}
    th{font-size:0.78rem;color:var(--muted);text-transform:uppercase}

    /* modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:none;align-items:center;justify-content:center;z-index:60}
    .modal{width:min(980px,94%);background:linear-gradient(180deg,#071427,#0b1826);border-radius:14px;padding:18px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 30px 80px rgba(2,6,23,0.9)}
    .modal pre{white-space:pre-wrap;background:transparent;color:#cfeefe;max-height:60vh;overflow:auto;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.02)}
    .modal .modal-head{display:flex;justify-content:space-between;align-items:center;gap:8px;margin-bottom:8px}

    footer{margin-top:14px;color:var(--muted);font-size:0.85rem;text-align:right}

    @media (max-width:1100px){
      .wrap{grid-template-columns: 1fr; padding-bottom:40px}
      .board{grid-template-columns: repeat(2, 1fr)}
      .sidebar{position:static}
      .search{min-width:220px}
    }
    @media (max-width:700px){
      .board{grid-template-columns: 1fr}
      .search{min-width:120px}
    }
  </style>
</head>
<body>
  <div class="wrap">

    <!-- SIDEBAR -->
    <aside class="sidebar" aria-label="Sidebar">
      <div class="brand">
        <div class="logo">SY</div>
        <div class="author">
          <h3>Shashank R. Yende</h3>
          <p class="muted">Business Case Portfolio — Arohanagara</p>
        </div>
      </div>

      <div class="section">
        <div class="label">Project</div>
        <div style="display:flex;flex-direction:column;gap:6px">
          <div style="font-weight:700">DAA-2025 · Mobility & Infrastructure</div>
          <div class="muted">20+ Data Structures • 20+ Algorithms • 10 Systems</div>
          <a class="link-primary" href="https://github.com/atharva-in-bits/DAA-2025" target="_blank" rel="noopener">Open GitHub</a>
        </div>
      </div>

      <div class="section">
        <div class="label">Quick links</div>
        <div class="tagrow">
          <a class="chip" href="#case1">Ride-Sharing</a>
          <a class="chip" href="#case5">Tolling</a>
          <a class="chip" href="#case9">Water</a>
          <a class="chip" href="#case10">Traffic</a>
        </div>
      </div>

      <div class="section">
        <div class="label">Author</div>
        <div>
          <div style="font-weight:700">Shashank R. Yende</div>
          <div class="muted">Roll 245 • DAA-2025</div>
        </div>
      </div>

      <div class="section" style="margin-top:18px">
        <div class="label">Representation</div>
        <div class="muted">Grid cards • Compact list • Data table</div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main" role="main">
      <div class="topbar" role="banner">
        <div class="hero">
          <div>
            <h1>Business Use-Case Analysis — Aroha Nagar</h1>
            <p>Ten engineering modules mapping algorithms &amp; data structures to realistic city systems. Vibrant list-first dashboard.</p>
          </div>
        </div>

        <div class="controls" role="region" aria-label="Controls">
          <div class="search" title="Filter cases (press / to focus)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="#9aa5b3" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="5" stroke="#9aa5b3" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <input id="filter" placeholder="Filter by case, domain, algorithm..." aria-label="Filter cases">
          </div>

          <div class="view-controls" role="tablist" aria-label="View controls">
            <button id="gridBtn" class="btn" title="Grid view">Grid</button>
            <button id="listBtn" class="btn primary" title="List view">List</button>
            <button id="tableBtn" class="btn" title="Table view">Table</button>
            <button id="downloadBtn" class="btn" title="Download code (stub)">Download</button>
          </div>
        </div>
      </div>

      <!-- BOARD / GRID -->
      <section id="board" class="board" aria-live="polite" style="display:none"></section>

      <!-- LIST (default visible) -->
      <section id="listView" class="listview" aria-live="polite"></section>

      <!-- TABLE (hidden) -->
      <section id="tableView" style="display:none">
        <div class="table-wrap">
          <table aria-describedby="tableDescription">
            <caption id="tableDescription" style="text-align:left;padding:10px 14px;color:var(--muted)">Business use-cases table</caption>
            <thead>
              <tr><th>#</th><th>Case</th><th>System</th><th>Algorithms / Structures</th><th>Implementation</th></tr>
            </thead>
            <tbody id="tableBody"></tbody>
          </table>
        </div>
      </section>

      <footer>© 2025 Shashank · Design &amp; Analysis of Algorithms — Arohanagara</footer>
    </main>
  </div>

  <!-- modal for code preview -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document" aria-labelledby="modalTitle">
      <div class="modal-head">
        <div>
          <strong id="modalTitle">Case code</strong>
          <div class="muted" id="modalSub">View snippet</div>
        </div>
        <div style="display:flex;gap:8px">
          <button id="copyBtn" class="btn" aria-label="Copy code">Copy</button>
          <button id="closeModal" class="btn" aria-label="Close preview">Close</button>
        </div>
      </div>
      <pre id="modalContent">Loading code preview...</pre>
    </div>
  </div>

  <script>
    // Data (detailed descriptions)
    const cases = [
      { id:1, tag:'Ride-Sharing', title:'Ride-Sharing & Dynamic Dispatch System', kicker:'Case 1 · Ride-Sharing',
        summary:`A ride-sharing and dynamic dispatch system is designed for real-time driver–rider matching and route optimization. It rapidly locates nearby available drivers using geospatial methods, ranks them (often by estimated time of arrival or distance), and optimally assigns ride requests. Route optimization ensures the chosen driver uses the shortest or fastest path to the pickup and drop-off points, often utilizing algorithms like Dijkstra or Bellman-Ford. Data structures like heaps (priority queues) prioritize drivers, regular queues buffer ride requests, and hashing supports fast lookups of drivers and users in a large, live system.`,
        implText:'C++ source for all algorithms', implLink:'Shashank/Case1.cpp', tags:['Real-time Matching','Shortest Paths','Heaps','Queues','Hashing'] },

      { id:2, tag:'EV Charging', title:'EV Charging Network – Slot Scheduling', kicker:'Case 2 · EV Charging',
        summary:`An EV charging network slot-scheduling system helps a user find the nearest suitable charger and reserve a time slot while keeping charger availability and station load up to date in real time. Efficient data structures like segment trees or Fenwick trees track which time slots are free or occupied, heaps prioritize the next-free or closest chargers, hash maps support fast reservation lookups, and arrays/structs store base station and charger data. This combination allows quick updates when a reservation is created or canceled, and fast queries when users ask for an available slot at a certain time.`,
        implText:'Segment & Fenwick Trees', implLink:'Shashank/Case2.cpp', tags:['Scheduling','Segment Tree','Fenwick','Heaps'] },

      { id:3, tag:'Logistics', title:'Warehouse & Distribution Routing', kicker:'Case 3 · Logistics',
        summary:`A warehouse and distribution routing system connects depots and customers with low-cost transport links and forms efficient delivery batches for orders. It can use minimum spanning tree (MST) algorithms like Kruskal or Prim to design a cheap backbone network between depots, trucks, or hubs, while sorting and lists help order and store delivery sequences inside each batch. Union-Find (Disjoint Set Union) tracks which depots or regions are already connected during MST construction so redundant or cyclic edges are avoided, leading to a cost-efficient distribution graph.`,
        implText:'Kruskal, Prim & DSU', implLink:'Shashank/Case3.cpp', tags:['MST','DSU','Routing','Batching'] },

      { id:4, tag:'Recycling', title:'Waste Processing & Recycling Operations', kicker:'Case 4 · Recycling',
        summary:`A waste processing and recycling system must quickly sort mixed waste, prioritize urgent/perishable loads, and keep conveyor and truck flows smooth. Heaps can prioritize loads that must be processed first, queues buffer waste on conveyors or waiting trucks, basic sorting algorithms help classify and order waste items, Union-Find groups recyclable materials into compatible classes, DFS on a process graph can reveal bottlenecks, and arrays/structures store batch-level data such as weight, type, and destination.`,
        implText:'Priority queues, DFS & DSU', implLink:'Shashank/Case4.cpp', tags:['Queues','Heaps','DSU','DFS'] },

      { id:5, tag:'Tolling', title:'Smart Toll Collection & Vehicle Lookup', kicker:'Case 5 · Tolling',
        summary:`A smart toll collection and vehicle lookup system reads a license plate (via camera/OCR or RFID tag), finds the corresponding vehicle record, checks its balance, selects the correct toll slab based on ordered rules (like vehicle class and time), and then deducts the toll automatically. Tries support fast plate prefix lookup, hash maps store balances and metadata, balanced trees or skip lists maintain ordered toll slabs, and arrays/structures hold core vehicle and toll data used across these operations.`,
        implText:'Trie, AVL & Skip List', implLink:'Shashank/Case5.cpp', tags:['Trie','AVL','Skip List','HashMap'] },

      { id:6, tag:'Reliability', title:'Predictive Maintenance & Alerting', kicker:'Case 6 · Reliability',
        summary:`Predictive maintenance and alerting systems continuously analyze sensor streams from machines to detect abnormal behavior early and trigger prioritized alerts. Segment trees, Fenwick trees, and sparse tables support fast range statistics on sensor readings, heaps rank alerts by severity or risk, queues buffer maintenance jobs, hash maps link assets to their sensors, and arrays/structures store machine metadata and configuration.`,
        implText:'Segment / Fenwick / Sparse', implLink:'Shashank/Case6.cpp', tags:['Sensor Analytics','Segment Tree','Sparse Table'] },

      { id:7, tag:'Parking', title:'Smart Parking – Slot Allocation System', kicker:'Case 7 · Parking',
        summary:`A smart parking slot allocation system keeps slots ordered and searchable, supports fast updates when cars enter/exit, and instantly maps vehicles to their reserved or occupied slots. Ordered trees or skip lists maintain free/occupied slots by number or distance, hash maps link each vehicle to its current slot, and simple structs store slot metadata like level, type, and status.`,
        implText:'Balanced trees & Skip List', implLink:'Shashank/Case7.cpp', tags:['AVL','Skip List','HashMap'] },

      { id:8, tag:'Streetlight', title:'Smart Streetlight Monitoring', kicker:'Case 8 · Smart City',
        summary:`A smart streetlight monitoring system continuously checks poles and circuits to detect faults, group nearby failures, and compute efficient repair routes for maintenance crews. Graph algorithms (BFS/DFS, Dijkstra, Union-Find) work on the streetlight/circuit network, while sparse tables and basic structures manage brightness logs and pole metadata, with queues and heaps often added on top in full systems.`,
        implText:'Graphs & RMQ logs', implLink:'Shashank/Case8.cpp', tags:['Graphs','BFS','Dijkstra','RMQ'] },

      { id:9, tag:'Water', title:'Water Treatment & Pipeline Optimization', kicker:'Case 9 · Water',
        summary:`A water treatment and pipeline optimization system models plants and pipe networks as graphs to trace flow, find low-loss pressure paths, isolate faulty zones, and quickly answer flow/pressure queries. BFS/DFS follow water paths and detect reachable areas, Dijkstra/Bellman-Ford compute minimum pressure-loss routes, Union-Find manages zone/group isolation, segment trees or sparse tables answer range queries on sensor lines, queues schedule pump operations, and arrays store pipeline and node metadata.`,
        implText:'Flow tracing & Shortest Paths', implLink:'Shashank/Case9.cpp', tags:['Graph','Dijkstra','Bellman-Ford'] },

      { id:10, tag:'Traffic', title:'Traffic Signal Optimization', kicker:'Case 10 · Mobility',
        summary:`Traffic signal optimization systems use live detector counts and historical patterns to adapt green times, coordinate corridors, and prioritize the most congested junctions. Segment/Fenwick trees track traffic counts over time, sparse tables answer historical “peak” queries, heaps rank overloaded intersections, queues represent per-approach vehicle lines, hash maps index intersections, and BFS/DFS group connected junctions into coordinated corridors.`,
        implText:'Traffic counts & Corridors', implLink:'Shashank/Case10.cpp', tags:['Fenwick','Segment','Corridors','Queues'] }
    ];

    // element refs
    const board = document.getElementById('board');
    const listView = document.getElementById('listView');
    const tableBody = document.getElementById('tableBody');
    const filterInput = document.getElementById('filter');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const modalContent = document.getElementById('modalContent');
    const modalTitle = document.getElementById('modalTitle');
    const modalSub = document.getElementById('modalSub');
    const copyBtn = document.getElementById('copyBtn');

    // helpers
    function el(tag, cls='', inner=''){ const e=document.createElement(tag); if(cls) e.className=cls; if(inner!==undefined) e.innerHTML=inner; return e; }
    function esc(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

    // render functions (Preview only — Open link removed)
    function renderGrid(list){
      board.innerHTML='';
      list.forEach(c=>{
        const card = el('article','case');
        card.id = 'case'+c.id;
        card.innerHTML = `
          <div class="meta">${esc(c.kicker)}</div>
          <h3>${esc(c.title)}</h3>
          <p>${esc(c.summary)}</p>
          <div class="taglist">${c.tags.map(t=>`<span class="tag-pill">${esc(t)}</span>`).join('')}</div>
        `;
        const impl = el('div','impl');
        impl.innerHTML = `<div class="muted">${esc(c.implText)}</div>
          <div style="display:flex;gap:10px;align-items:center">
            <a class="code-link" href="#" data-link="${esc(c.implLink)}" data-title="${esc(c.title)}">Preview</a>
          </div>`;
        card.appendChild(impl);
        board.appendChild(card);
      });
      attachModalTriggers();
    }

    function renderList(list){
      listView.innerHTML='';
      list.forEach(c=>{
        const li = el('div','list-item');
        li.innerHTML = `
          <div class="list-left">
            <div class="case-num">${c.id}</div>
            <div class="list-body">
              <h4>${esc(c.title)}</h4>
              <p>${esc(c.summary)}</p>
              <div style="margin-top:8px">${c.tags.map(t=>`<span class="tag-pill" style="margin-right:6px">${esc(t)}</span>`).join('')}</div>
            </div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:10px">
            <div class="muted">${esc(c.implText)}</div>
            <div style="display:flex;gap:8px">
              <a class="code-link" href="#" data-link="${esc(c.implLink)}" data-title="${esc(c.title)}">Preview</a>
            </div>
          </div>
        `;
        listView.appendChild(li);
      });
      attachModalTriggers();
    }

    function renderTable(list){
      tableBody.innerHTML='';
      list.forEach(c=>{
        const tr = el('tr');
        tr.innerHTML = `<td>${c.id}</td><td>${esc(c.kicker)}</td><td>${esc(c.title)}</td><td>${esc(c.tags.join(', '))}</td>
          <td><a class="code-link" href="#" data-link="${esc(c.implLink)}" data-title="${esc(c.title)}">${esc(c.implText)}</a></td>`;
        tableBody.appendChild(tr);
      });
      attachModalTriggers();
    }

    function attachModalTriggers(){
      document.querySelectorAll('.code-link[data-link]').forEach(a=>{
        a.removeEventListener('click', codeClickHandler);
        a.addEventListener('click', codeClickHandler);
      });
    }
    function codeClickHandler(e){
      e.preventDefault();
      const link = e.currentTarget.dataset.link;
      const title = e.currentTarget.dataset.title;
      openModal(title, link);
    }

    // modal behaviour (preview)
    function openModal(title, link){
      modalTitle.textContent = title + ' — Code preview';
      modalSub.textContent = link;
      modalBackdrop.style.display = 'flex';
      modalBackdrop.setAttribute('aria-hidden','false');
      modalContent.textContent = 'Loading preview...';
      fetch(link).then(r=>{
        if(!r.ok) throw new Error('Could not fetch file (CORS / not hosted).');
        return r.text();
      }).then(txt=>{
        modalContent.textContent = txt.slice(0, 4000) + (txt.length>4000?'\n\n...truncated preview...':'');
      }).catch(err=>{
        modalContent.textContent = `Preview not available from this host.\n\nFile: ${link}\n\n(If the code files are hosted on the same origin previews will appear here.)\n\nError: ${err.message}`;
      });
    }

    function closeModal(){ modalBackdrop.style.display='none'; modalBackdrop.setAttribute('aria-hidden','true'); }
    document.getElementById('closeModal').addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', (ev)=>{ if(ev.target===modalBackdrop) closeModal(); });

    copyBtn.addEventListener('click', ()=>{
      const txt = modalContent.textContent;
      if(!txt) return;
      navigator.clipboard?.writeText(txt).then(()=> alert('Code copied to clipboard'), ()=> alert('Copy not supported'));
    });

    // view toggles and filtering
    const gridBtn = document.getElementById('gridBtn');
    const listBtn = document.getElementById('listBtn');
    const tableBtn = document.getElementById('tableBtn');
    const downloadBtn = document.getElementById('downloadBtn');

    function showView(view){
      document.getElementById('board').style.display = (view==='grid') ? 'grid':'none';
      listView.style.display = (view==='list') ? 'block':'none';
      document.getElementById('tableView').style.display = (view==='table') ? 'block':'none';
      [gridBtn,listBtn,tableBtn].forEach(b => b.classList.remove('primary'));
      if(view==='grid') gridBtn.classList.add('primary');
      if(view==='list') listBtn.classList.add('primary');
      if(view==='table') tableBtn.classList.add('primary');
    }

    gridBtn.addEventListener('click', ()=> showView('grid'));
    listBtn.addEventListener('click', ()=> showView('list'));
    tableBtn.addEventListener('click', ()=> showView('table'));

    function applyFilter(){
      const q = (filterInput.value||'').trim().toLowerCase();
      const filtered = cases.filter(c => {
        if(!q) return true;
        const hay = (c.title + ' ' + c.summary + ' ' + c.kicker + ' ' + c.tags.join(' ') + ' ' + c.implText + ' ' + c.tag).toLowerCase();
        return hay.includes(q);
      });
      renderGrid(filtered);
      renderList(filtered);
      renderTable(filtered);
    }

    filterInput.addEventListener('input', applyFilter);
    document.addEventListener('keydown', (e)=> { if(e.key==='/' && document.activeElement !== filterInput){ e.preventDefault(); filterInput.focus(); } });

    downloadBtn.addEventListener('click', ()=>{
      alert('Download: In this local demo the files must be hosted to download. On a server I can wire a zip endpoint to bundle the case files.');
    });

    // initial render: LIST view default
    renderGrid(cases);
    renderList(cases);
    renderTable(cases);
    showView('list');

    // accessibility & reduced motion
    if (matchMedia('(prefers-reduced-motion: reduce)').matches) {
      // remove transitions if user prefers reduced motion
      document.documentElement.style.setProperty('--shadow-lg', 'none');
    }

    // keyboard focus hint
    document.addEventListener('keydown', (e)=> { if(e.key==='Tab') document.body.classList.add('show-focus'); });
  </script>
</body>
</html>
